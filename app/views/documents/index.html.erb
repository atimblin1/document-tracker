<div class="max-w-7xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Documents</h1>
    <p class="text-gray-600">Manage and organize your PDF documents</p>
  </div>
  
  <!-- Search and Filter -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
    <%= form_with url: documents_path, method: :get, data: { controller: "search", turbo_frame: "_top" }, class: "space-y-4 md:space-y-0 md:flex md:gap-4 md:items-end" do |f| %>
      <div class="flex-1">
        <%= f.label :search, "Search by title", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.text_field :search, value: params[:search], placeholder: "Enter title...", class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", data: { action: "input->search#submit" } %>
      </div>
      
      <div class="flex-1">
        <%= f.label :status, "Status", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.select :status, options_for_select([["All", ""]] + Document::STATUSES.map { |s| [s.titleize, s] }, params[:status]), {}, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", data: { action: "change->search#submit" } %>
      </div>
      
      <div class="flex-1">
        <%= f.label :doc_type, "Type", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.select :doc_type, options_for_select([["All", ""]] + Document::DOC_TYPES.map { |t| [t.titleize, t] }, params[:doc_type]), {}, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", data: { action: "change->search#submit" } %>
      </div>
      
      <div class="flex-1">
        <%= f.label :tag_id, "Tag", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= f.select :tag_id, options_for_select([["All", ""]] + @tags.map { |t| [t.name, t.id] }, params[:tag_id]), {}, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", data: { action: "change->search#submit" } %>
      </div>
    <% end %>
  </div>
  
  <!-- Documents List -->
  <% if @documents.any? %>
    <div class="grid gap-4">
      <% @documents.each do |document| %>
        <%= link_to document, class: "block" do %>
          <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-lg hover:border-blue-200 transition-all duration-200 cursor-pointer active:scale-[0.99]">
            <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-3">
              <div class="flex-1">
                <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 mb-2"><%= document.title %></h3>
              
              <% if document.description.present? %>
                <p class="text-gray-600 text-sm mb-3"><%= truncate(document.description, length: 150) %></p>
              <% end %>
              
              <div class="flex flex-wrap gap-2 items-center">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium <%= status_badge_class(document.status) %>">
                  <%= document.status.titleize %>
                </span>
                
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                  <%= document.doc_type.titleize %>
                </span>
                
                <% document.tags.each do |tag| %>
                  <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200">
                    #<%= tag.name %>
                  </span>
                <% end %>
              </div>
            </div>
            
            <div class="text-sm text-gray-500 flex-shrink-0">
              <%= document.created_at.strftime("%b %d, %Y") %>
            </div>
          </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center">
      <div class="text-gray-400 mb-4">
        <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold text-gray-900 mb-2">No documents found</h3>
      <p class="text-gray-600 mb-6 max-w-md mx-auto">
        <% if params[:search].present? || params[:status].present? || params[:doc_type].present? || params[:tag_id].present? %>
          No documents match your current filters. Try adjusting your search criteria or clearing filters.
        <% else %>
          Get started by uploading your first PDF document. You can organize them with tags and collections.
        <% end %>
      </p>
      <% unless demo_mode? %>
        <%= link_to "Upload Your First Document", new_document_path, class: "inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition shadow-sm hover:shadow-md active:scale-95" %>
      <% end %>
    </div>
  <% end %>
</div>
